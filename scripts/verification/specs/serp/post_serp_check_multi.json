{
  "id": "POST_SERP_CHECK_MULTI",
  "pillar": "functionality",
  "kind": "post",
  "capabilities": ["serp", "api_contract"],
  "request": {
    "url": "/api/serp/check",
    "body": {
      "urls": ["https://example.com", "https://www.wikipedia.org"]
    }
  },
  "expect": {
    "status": 200,
    "ok": true,
    "body.status": "success"
  },
  "assert": {
    "array_min_len": {
      "body.results": 2
    },
    "paths_exist": [
      "body.results.0.url",
      "body.results.0.status",
      "body.results.1.url",
      "body.results.1.status"
    ],
    "regex_match": {
      "body.results.0.status": "^[23][0-9]{2}$",
      "body.results.1.status": "^[23][0-9]{2}$"
    },
    "text_not_contains": {
      "body.results.0.error": [
        "HTTPSConnectionPool",
        "CERTIFICATE_VERIFY_FAILED"
      ],
      "body.results.1.error": [
        "HTTPSConnectionPool",
        "CERTIFICATE_VERIFY_FAILED"
      ]
    }
  }
}
