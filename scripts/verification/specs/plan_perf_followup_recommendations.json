{
  "id": "PLAN_PERF_FOLLOWUP_RECOMMENDATIONS",
  "pillar": "purpose",
  "kind": "plan_and_run",
  "capabilities": ["planner", "performance", "advisor_decision_support"],
  "request": {
    "message": "give me last week performance",
    "customer_ids": ["${TARGET_CUSTOMER_ID}"],
    "session_id": "${SESSION_ID}"
  },
  "expect": {
    "executed": true,
    "result.mode": "performance"
  },
  "intent_goal": {
    "target": "followup_chat_send",
    "response_paths": ["__body.reply"],
    "must_include_any": ["option", "strategy", "recommend", "path", "approach"],
    "min_any_matches": 2,
    "must_include_all": ["monitor"],
    "must_not_include": ["LAST_7_DAYS", "LAST_14_DAYS", "LAST_30_DAYS", "No date specified"]
  },
  "followup": {
    "chat_send": {
      "message": "What are your recommendations from that data to improve performance?",
      "tool": "performance",
      "prompt_kind": "tool_followup",
      "budgets": {
        "max_latency_ms": 60000
      },
      "assert": {
        "reply_min_len": 180,
        "reply_not_contains": ["LAST_7_DAYS", "LAST_14_DAYS", "LAST_30_DAYS", "cpm"],
        "regex_match": {
          "reply": "(?is)(option|approach|path|strategy)\\s+[a-d1-4].*(option|approach|path|strategy)\\s+[a-d1-4].*(monitor|watch|track|keep an eye)"
        }
      }
    }
  }
}
