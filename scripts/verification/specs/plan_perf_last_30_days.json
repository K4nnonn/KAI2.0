{
  "id": "PLAN_PERF_LAST_30_DAYS",
  "scenario": "Performance parity/accuracy (STABLE_LAST_30_DAYS)",
  "pillar": "quality",
  "kind": "plan_and_run",
  "capabilities": ["performance", "sa360_parity", "sa360_accuracy"],
  "request": {
    "message": "give me performance (use the default date range)",
    "customer_ids": ["${TARGET_CUSTOMER_ID}"],
    "default_date_range": "${STABLE_LAST_30_DAYS}",
    "session_id": "${SESSION_ID}"
  },
  "expect": {
    "executed": true,
    "result.mode": "performance"
  },
  "assert": {
    "summary_matches_result": ["conversions", "cost", "ctr", "cpc"],
    "sa360_parity": {
      "source": "current_live",
      "compare_previous": true,
      "metrics": ["impressions", "clicks", "cost", "conversions", "ctr", "cpc", "roas"],
      "abs_tolerance": {
        "impressions": 1,
        "clicks": 1,
        "cost": 1.0,
        "conversions": 1,
        "ctr": 0.05,
        "cpc": 0.05,
        "roas": 0.01
      }
    },
    "sa360_accuracy": {
      "source": "current_live",
      "compare_previous": true,
      "metrics": ["impressions", "clicks", "cost", "conversions", "ctr", "cpc", "roas"],
      "require_report_names_echo": true,
      "require_source_frame_in_reports": true,
      "require_metric_presence": true
    }
  }
}
